<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üì∫ Russian Shorts</title>
<style>
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: 'Arial', sans-serif;
    background: #000;
    color: #fff;
    overflow-x: hidden;
  }
  #loader {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 80px; height: 80px;
    border: 8px solid #330000;
    border-top: 8px solid #ff0000;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    z-index: 1000;
  }
  @keyframes spin {
    0% {transform: translate(-50%, -50%) rotate(0deg);}
    100% {transform: translate(-50%, -50%) rotate(360deg);}
  }

  #feed {
    max-width: 1000px;
    margin: 20px auto 100px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
  }

  .video-card {
    background: #111;
    border-radius: 12px;
    box-shadow: 0 0 10px #ff0000cc;
    width: 280px;
    cursor: pointer;
    transition: transform 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .video-card:hover {
    transform: scale(1.05);
  }

  .thumbnail {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  .title {
    padding: 10px;
    font-size: 16px;
    color: #fff;
    min-height: 48px;
  }

  #player-container {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    height: 320px;
    background: #111;
    box-shadow: 0 -5px 20px #ff0000cc;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    display: none;
    z-index: 999;
  }
  #player-container iframe {
    width: 90%;
    height: 100%;
    border-radius: 12px;
    border: none;
  }

  #close-player {
    position: absolute;
    top: 10px; right: 20px;
    background: #ff0000;
    border: none;
    color: white;
    font-size: 18px;
    padding: 6px 12px;
    border-radius: 8px;
    cursor: pointer;
  }

  @media(max-width: 600px) {
    .video-card {
      width: 90vw;
    }
  }
</style>
</head>
<body>

<div id="loader"></div>
<div id="feed"></div>

<div id="player-container">
  <button id="close-player">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
  <iframe id="player" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>

<script>
  const API_KEY = 'AIzaSyDhAKMDqX2G0TNwl3Czk1Dkt89cR2E4e_A';
  const feed = document.getElementById('feed');
  const loader = document.getElementById('loader');
  const playerContainer = document.getElementById('player-container');
  const player = document.getElementById('player');
  const closePlayerBtn = document.getElementById('close-player');

  // –≠–º—É–ª—è—Ü–∏—è "—Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ" pageToken
  // YouTube API pageTokens ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ, –Ω–æ –º—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–µ–º —Å —Ä–∞–∑–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–æ—Å—å)
  // –ó–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ –∫ –ø–æ–∏—Å–∫–æ–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É –¥–ª—è "—Ä–∞–Ω–¥–æ–º–∞"
  const randomStart = 1000 + Math.floor(Math.random() * (100000000 - 1000));

  async function loadVideos() {
    loader.style.display = 'block';
    try {
      // –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è ‚Äî –º–µ–Ω—è–µ–º q –Ω–∞ "shorts russian" + —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
      // —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoDuration=short&maxResults=20&q=shorts+russian+${randomStart}&relevanceLanguage=ru&regionCode=RU&order=date&key=${API_KEY}`);
      const data = await res.json();
      loader.style.display = 'none';

      if(!data.items || data.items.length === 0) {
        feed.innerHTML = '<p style="color:#ff4444; text-align:center; width:100%;">–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>';
        return;
      }

      data.items.forEach(item => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const thumb = item.snippet.thumbnails.medium.url;

        const card = document.createElement('div');
        card.className = 'video-card';
        card.innerHTML = `
          <img class="thumbnail" src="${thumb}" alt="${title}" loading="lazy" />
          <div class="title">${title}</div>
        `;
        card.addEventListener('click', () => {
          openPlayer(videoId);
        });

        feed.appendChild(card);
      });
    } catch (e) {
      loader.style.display = 'none';
      feed.innerHTML = `<p style="color:#ff4444; text-align:center; width:100%;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ.</p>`;
      console.error(e);
    }
  }

  function openPlayer(videoId) {
    player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&controls=1&modestbranding=1&rel=0`;
    playerContainer.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  function closePlayer() {
    player.src = '';
    playerContainer.style.display = 'none';
    document.body.style.overflow = '';
  }

  closePlayerBtn.addEventListener('click', closePlayer);

  loadVideos();
</script>

</body>
</html>
